
{% extends "base.html" %}

{% block title %}{{ 'Premium Agricultural Export' if lang == 'en' else 'Ekspor Pertanian Premium' }}{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section bg-success bg-gradient text-white py-5">
    <div class="container">
        <div class="row align-items-center min-vh-50">
            <div class="col-lg-6">
                <h1 class="display-4 fw-bold mb-4">
                    {% if settings %}
                        {{ settings.company_name_en if lang == 'en' else settings.company_name_id }}
                    {% else %}
                        {{ 'Agricultural Export Indonesia' if lang == 'en' else 'Ekspor Pertanian Indonesia' }}
                    {% endif %}
                </h1>
                <p class="lead mb-4">
                    {% if settings %}
                        {{ settings.company_description_en if lang == 'en' else settings.company_description_id }}
                    {% else %}
                        {{ 'High-quality, fresh banana leaves sourced directly from Indonesian plantations for your international business needs.' if lang == 'en' else 'Daun pisang segar berkualitas tinggi yang bersumber langsung dari perkebunan Indonesia untuk kebutuhan bisnis internasional Anda.' }}
                    {% endif %}
                </p>
                <div class="d-flex gap-3">
                    <a href="{{ url_for('products') }}" class="btn btn-light btn-lg">
                        <i class="fas fa-shopping-bag me-2"></i>
                        {{ 'Browse Products' if lang == 'en' else 'Jelajahi Produk' }}
                    </a>
                    {% if settings and settings.contact_whatsapp %}
                    <a href="https://wa.me/{{ settings.contact_whatsapp.replace('+', '').replace('-', '') }}"
                       class="btn btn-outline-light btn-lg">
                        <i class="fab fa-whatsapp me-2"></i>
                        {{ 'Contact Us' if lang == 'en' else 'Hubungi Kami' }}
                    </a>
                    {% endif %}
                </div>
            </div>
            <div class="col-lg-6">
                <!-- Hero Gallery Carousel -->
                {% if settings and settings.gallery_images %}
                {% set gallery_list = settings.gallery_images.split(',') if settings.gallery_images else [] %}
                {% if gallery_list and gallery_list[0].strip() %}
                <div id="heroGalleryCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        {% for image_url in gallery_list[:5] %}
                        {% if image_url.strip() %}
                        <button type="button" data-bs-target="#heroGalleryCarousel" data-bs-slide-to="{{ loop.index0 }}" 
                                {{ 'class="active"' if loop.first else '' }}></button>
                        {% endif %}
                        {% endfor %}
                    </div>

                    <div class="carousel-inner rounded-3 shadow-lg">
                        {% for image_url in gallery_list[:5] %}
                        {% if image_url.strip() %}
                        <div class="carousel-item {{ 'active' if loop.first }}">
                            <img src="{{ image_url.strip() }}" class="d-block w-100" alt="Hero Gallery Image {{ loop.index }}" 
                                 style="height: 400px; object-fit: cover; object-position: center; border-radius: 15px;">
                            <div class="carousel-caption d-none d-md-block">
                                <div class="bg-dark bg-opacity-75 rounded-3 p-3">
                                    <h5 class="mb-1 text-white">{{ 'Premium Quality Products' if lang == 'en' else 'Produk Berkualitas Premium' }}</h5>
                                    <p class="mb-0 text-white">{{ 'Fresh from Indonesian plantations' if lang == 'en' else 'Segar dari perkebunan Indonesia' }}</p>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>

                    <button class="carousel-control-prev" type="button" data-bs-target="#heroGalleryCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#heroGalleryCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
                {% else %}
                <div class="text-center">
                    <i class="fas fa-leaf display-1 text-light opacity-50"></i>
                </div>
                {% endif %}
                {% else %}
                <div class="text-center">
                    <i class="fas fa-leaf display-1 text-light opacity-50"></i>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</section>

<!-- Gallery Carousel Section -->
{% if settings and settings.gallery_images %}
{% set gallery_list = settings.gallery_images.split(',') if settings.gallery_images else [] %}
{% if gallery_list and gallery_list[0].strip() %}
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">{{ 'Company Gallery' if lang == 'en' else 'Galeri Perusahaan' }}</h2>
            <p class="lead text-muted">{{ 'Our products and company documentation' if lang == 'en' else 'Produk dan dokumentasi perusahaan kami' }}</p>
        </div>

        <div id="heroGallery" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                {% for image_url in gallery_list[:5] %}
                {% if image_url.strip() %}
                <button type="button" data-bs-target="#heroGallery" data-bs-slide-to="{{ loop.index0 }}" 
                        {{ 'class="active"' if loop.first else '' }}></button>
                {% endif %}
                {% endfor %}
            </div>

            <div class="carousel-inner rounded-3 shadow-lg">
                {% for image_url in gallery_list[:5] %}
                {% if image_url.strip() %}
                <div class="carousel-item {{ 'active' if loop.first }}">
                    <img src="{{ image_url.strip() }}" class="d-block w-100" alt="Gallery Image {{ loop.index }}" 
                         style="height: 500px; object-fit: cover; object-position: center;">
                    <div class="carousel-caption d-none d-md-block">
                        <div class="bg-dark bg-opacity-75 rounded-3 p-3">
                            <h5 class="mb-1">{{ 'Gallery Image' if lang == 'en' else 'Gambar Galeri' }} {{ loop.index }}</h5>
                            <p class="mb-0">{{ 'Our quality products and facilities' if lang == 'en' else 'Produk dan fasilitas berkualitas kami' }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}
                {% endfor %}
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#heroGallery" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#heroGallery" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
</section>
{% endif %}
{% endif %}

<!-- Product Carousel -->
{% if featured_products %}
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">{{ 'Featured Products' if lang == 'en' else 'Produk Unggulan' }}</h2>
            <p class="lead text-muted">{{ 'Discover our premium agricultural products' if lang == 'en' else 'Temukan produk pertanian premium kami' }}</p>
        </div>

        <div id="productCarousel" class="carousel slide" data-bs-ride="carousel">
            <div class="carousel-indicators">
                {% for i in range(0, featured_products|length, 3) %}
                <button type="button" data-bs-target="#productCarousel" data-bs-slide-to="{{ loop.index0 }}" 
                        {{ 'class="active"' if loop.first else '' }}></button>
                {% endfor %}
            </div>

            <div class="carousel-inner">
                {% for products_chunk in featured_products|batch(3) %}
                <div class="carousel-item {{ 'active' if loop.first }}">
                    <div class="row g-4">
                        {% for product in products_chunk %}
                        <div class="col-md-4">
                            <div class="card h-100 border-0 shadow product-card">
                                {% if product.image_url %}
                                <div class="position-relative overflow-hidden">
                                    <img src="{{ product.image_url }}" alt="{{ product.name_en if lang == 'en' else product.name_id }}"
                                         class="card-img-top object-fit-cover" style="height: 250px;">
                                    <div class="position-absolute top-0 start-0 m-3">
                                        <span class="badge bg-success">{{ product.category.name_en if lang == 'en' else product.category.name_id }}</span>
                                    </div>
                                </div>
                                {% else %}
                                <div class="card-img-top bg-gradient d-flex align-items-center justify-content-center"
                                     style="height: 250px; background: linear-gradient(45deg, var(--primary-color), var(--export-green-light));">
                                    <i class="fas fa-leaf text-white" style="font-size: 4rem;"></i>
                                </div>
                                {% endif %}

                                <div class="card-body p-4">
                                    <h5 class="card-title fw-bold mb-2">{{ product.name_en if lang == 'en' else product.name_id }}</h5>
                                    <p class="card-text mb-3">{{ (product.description_en if lang == 'en' else product.description_id)[:100] }}...</p>
                                    
                                    <div class="mb-3">
                                        <span class="h5 fw-bold text-success">{{ format_currency(get_product_price(product, currency), currency, lang) }}</span>
                                        <small class="text-muted ms-2">/ {{ product.unit }}</small>
                                    </div>

                                    <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn btn-success w-100">
                                        <i class="fas fa-eye me-2"></i>{{ 'View Details' if lang == 'en' else 'Lihat Detail' }}
                                    </a>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endfor %}
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#productCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#productCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
</section>
{% endif %}

<!-- Company Documentation -->
<section class="py-5 bg-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">{{ 'Company Documentation' if lang == 'en' else 'Dokumentasi Perusahaan' }}</h2>
            <p class="lead text-muted">{{ 'Our certifications and export credentials' if lang == 'en' else 'Sertifikasi dan kredensial ekspor kami' }}</p>
        </div>

        <!-- Gallery Carousel -->
        {% if settings and settings.gallery_images %}
        {% set gallery_list = settings.gallery_images.split(',') if settings.gallery_images else [] %}
        {% if gallery_list and gallery_list[0].strip() %}
        <div class="row mb-5">
            <div class="col-12">
                <div id="companyGallery" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                        {% for image_url in gallery_list %}
                        {% if image_url.strip() %}
                        <button type="button" data-bs-target="#companyGallery" data-bs-slide-to="{{ loop.index0 }}" 
                                {{ 'class="active"' if loop.first else '' }}></button>
                        {% endif %}
                        {% endfor %}
                    </div>

                    <div class="carousel-inner rounded">
                        {% for image_url in gallery_list %}
                        {% if image_url.strip() %}
                        <div class="carousel-item {{ 'active' if loop.first }}">
                            <img src="{{ image_url.strip() }}" class="d-block w-100" alt="Company Documentation" 
                                 style="height: 400px; object-fit: cover;">
                        </div>
                        {% endif %}
                        {% endfor %}
                    </div>

                    <button class="carousel-control-prev" type="button" data-bs-target="#companyGallery" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#companyGallery" data-bs-slide="next">
                        <span class="carousel-control-next-icon"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>
        </div>
        {% endif %}
        {% endif %}

        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm text-center">
                    <div class="card-body p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3">
                            <i class="fas fa-certificate text-success fa-2x"></i>
                        </div>
                        <h5 class="card-title">{{ 'Export License' if lang == 'en' else 'Izin Ekspor' }}</h5>
                        <p class="card-text text-muted">
                            {{ 'Certified export license for international trade operations' if lang == 'en' else 'Izin ekspor bersertifikat untuk operasi perdagangan internasional' }}
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm text-center">
                    <div class="card-body p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3">
                            <i class="fas fa-leaf text-success fa-2x"></i>
                        </div>
                        <h5 class="card-title">{{ 'Organic Certification' if lang == 'en' else 'Sertifikasi Organik' }}</h5>
                        <p class="card-text text-muted">
                            {{ 'Organic certified products meeting international standards' if lang == 'en' else 'Produk bersertifikat organik memenuhi standar internasional' }}
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm text-center">
                    <div class="card-body p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3">
                            <i class="fas fa-globe text-success fa-2x"></i>
                        </div>
                        <h5 class="card-title">{{ 'International Standards' if lang == 'en' else 'Standar Internasional' }}</h5>
                        <p class="card-text text-muted">
                            {{ 'Compliance with global export and quality standards' if lang == 'en' else 'Kepatuhan terhadap standar ekspor dan kualitas global' }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Features Section -->
<section class="py-5">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">{{ 'Why Choose Our Products?' if lang == 'en' else 'Mengapa Memilih Produk Kami?' }}</h2>
            <p class="lead text-muted">{{ 'Excellence in every aspect of our service' if lang == 'en' else 'Keunggulan dalam setiap aspek layanan kami' }}</p>
        </div>

        <div class="row g-4">
            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3">
                            <i class="fas fa-shipping-fast text-success fa-2x"></i>
                        </div>
                        <h5 class="card-title">{{ 'Fast Shipping' if lang == 'en' else 'Pengiriman Cepat' }}</h5>
                        <p class="card-text text-muted">
                            {{ 'Reliable and fast shipping worldwide with proper documentation' if lang == 'en' else 'Pengiriman yang andal dan cepat ke seluruh dunia dengan dokumentasi lengkap' }}
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3">
                            <i class="fas fa-handshake text-success fa-2x"></i>
                        </div>
                        <h5 class="card-title">{{ 'Trusted Partner' if lang == 'en' else 'Mitra Terpercaya' }}</h5>
                        <p class="card-text text-muted">
                            {{ 'Years of experience serving international clients' if lang == 'en' else 'Pengalaman bertahun-tahun melayani klien internasional' }}
                        </p>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card h-100 border-0 shadow-sm">
                    <div class="card-body text-center p-4">
                        <div class="bg-success bg-opacity-10 rounded-circle p-3 d-inline-flex mb-3">
                            <i class="fas fa-award text-success fa-2x"></i>
                        </div>
                        <h5 class="card-title">{{ 'Premium Quality' if lang == 'en' else 'Kualitas Premium' }}</h5>
                        <p class="card-text text-muted">
                            {{ 'Only the finest products selected for international export' if lang == 'en' else 'Hanya produk terbaik yang dipilih untuk ekspor internasional' }}
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="py-5 bg-dark text-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="display-5 fw-bold">{{ 'Ready to Export?' if lang == 'en' else 'Siap Ekspor?' }}</h2>
            <p class="lead text-muted">{{ 'Contact us for your international orders' if lang == 'en' else 'Hubungi kami untuk pesanan internasional Anda' }}</p>
        </div>

        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="row g-4">
                    <div class="col-md-4 text-center">
                        <div class="p-4">
                            <div class="bg-success bg-opacity-20 rounded-circle p-3 d-inline-flex mb-3">
                                <i class="fas fa-envelope text-success fa-2x"></i>
                            </div>
                            <h5>{{ 'Email Us' if lang == 'en' else 'Email Kami' }}</h5>
                            <p class="text-muted">
                                {% if settings %}{{ settings.contact_email }}{% else %}info@exportindonesia.com{% endif %}
                            </p>
                        </div>
                    </div>

                    <div class="col-md-4 text-center">
                        <div class="p-4">
                            <div class="bg-success bg-opacity-20 rounded-circle p-3 d-inline-flex mb-3">
                                <i class="fab fa-whatsapp text-success fa-2x"></i>
                            </div>
                            <h5>WhatsApp</h5>
                            <p class="text-muted">
                                {% if settings %}{{ settings.contact_whatsapp }}{% else %}+62-812-3456-7890{% endif %}
                            </p>
                        </div>
                    </div>

                    <div class="col-md-4 text-center">
                        <div class="p-4">
                            <div class="bg-success bg-opacity-20 rounded-circle p-3 d-inline-flex mb-3">
                                <i class="fas fa-phone text-success fa-2x"></i>
                            </div>
                            <h5>{{ 'Call Us' if lang == 'en' else 'Telepon Kami' }}</h5>
                            <p class="text-muted">
                                {% if settings %}{{ settings.contact_phone }}{% else %}+62-21-12345678{% endif %}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
